import os

to_replace = "const modified = prependText + selection;"
replacement = "const modified = selection.length > 20 ? prependText + selection : selection;"
filename_contains = "description"
root_dir = "exercises"

for dirpath, dirnames, filenames in os.walk(root_dir):
    for filename in filenames:
        if filename_contains in filename:
            file_path = os.path.join(dirpath, filename)
            print(f"Processing: {file_path}")
            with open(file_path, "r", encoding="utf-8") as f:
                lines = f.readlines()
            changed = False
            new_lines = []
            for line in lines:
                if to_replace in line:
                    line = line.replace(
                        to_replace,
                        replacement
                    )
                    changed = True
                new_lines.append(line)
            if changed:
                with open(file_path, "w", encoding="utf-8") as f:
                    f.writelines(new_lines)
                print(f"Updated: {file_path}")
